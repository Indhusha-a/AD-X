<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>AD-X - Admin Dashboard</title>
  <link href="/css/style.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<!-- Navigation Header -->
<nav class="navbar">
  <div class="container">
    <a class="navbar-brand" href="/">ðŸš€ AD-X</a>
    <div class="navbar-nav">
                <span class="navbar-text" style="margin-right: 20px;">
                    <i class="bi bi-shield-check"></i> Welcome, Admin!
                </span>
      <a class="btn btn-secondary" href="/logout">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </div>
  </div>
</nav>

<div class="container">
  <div class="dashboard-header">
    <h1><i class="bi bi-speedometer2"></i> Admin Dashboard</h1>
    <p>Manage users and system settings</p>
  </div>

  <div class="card fade-in">
    <h3><i class="bi bi-people"></i> User Management</h3>

    <div class="table-responsive">
      <table class="table">
        <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
          <td th:text="${user.id}"></td>
          <td th:text="${user.firstName + ' ' + user.lastName}"></td>
          <td th:text="${user.email}"></td>
          <td>
            <span th:if="${user.role == 'BUYER'}" class="badge badge-primary">Buyer</span>
            <span th:if="${user.role == 'SELLER'}" class="badge badge-success">Seller</span>
            <span th:if="${user.role == 'ADMIN'}" class="badge badge-danger">Admin</span>
          </td>
          <td>
            <a th:href="@{/admin/edit/{id}(id=${user.id})}" class="btn btn-primary btn-sm">
              <i class="bi bi-pencil"></i> Edit
            </a>
            <a th:href="@{/admin/delete/{id}(id=${user.id})}" class="btn btn-secondary btn-sm"
               onclick="return confirm('Are you sure you want to delete this user?')">
              <i class="bi bi-trash"></i> Delete
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div style="text-align: center; margin-top: 30px;">
      <a href="/" class="btn btn-primary">
        <i class="bi bi-house"></i> Home
      </a>
      <a href="/logout" class="btn btn-secondary">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </div>
  </div>
</div>

<script>
  // Add confirmation for delete actions
  document.addEventListener('DOMContentLoaded', function() {
    const deleteButtons = document.querySelectorAll('a[onclick]');
    deleteButtons.forEach(button => {
      button.addEventListener('click', function(e) {
        if (!confirm('Are you sure you want to delete this user?')) {
          e.preventDefault();
        }
      });
    });
  });
</script>
</body>
</html>