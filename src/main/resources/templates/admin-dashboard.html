<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>AD-X - Admin Dashboard</title>
  <link href="/css/style.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      border-left: 4px solid #dc3545;
    }

    .stat-card.primary {
      border-left-color: #667eea;
    }

    .stat-card.success {
      border-left-color: #28a745;
    }

    .stat-card.warning {
      border-left-color: #ffc107;
    }

    .stat-icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .stat-card .stat-icon { color: #dc3545; }
    .stat-card.primary .stat-icon { color: #667eea; }
    .stat-card.success .stat-icon { color: #28a745; }
    .stat-card.warning .stat-icon { color: #ffc107; }
  </style>
</head>
<body>
<!-- Navigation Header -->
<nav class="navbar">
  <div class="container">
    <a class="navbar-brand" href="/">ðŸš€ AD-X</a>
    <div class="navbar-nav">
                <span class="navbar-text" style="margin-right: 20px;">
                    <i class="bi bi-shield-check"></i> Welcome, Administrator!
                </span>
      <a class="btn btn-secondary" href="/logout">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </div>
  </div>
</nav>

<div class="container">
  <div class="dashboard-header">
    <h1><i class="bi bi-speedometer2"></i> Admin Dashboard</h1>
    <p>System Administration & User Management</p>
  </div>

  <!-- Statistics -->
  <div class="card fade-in">
    <h3><i class="bi bi-graph-up"></i> System Overview</h3>
    <div class="admin-stats">
      <div class="stat-card">
        <div class="stat-icon">
          <i class="bi bi-people"></i>
        </div>
        <h3 th:text="${users.size()}">0</h3>
        <p>Total Users</p>
      </div>

      <div class="stat-card primary">
        <div class="stat-icon">
          <i class="bi bi-cart"></i>
        </div>
        <h3>0</h3>
        <p>Buyers</p>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">
          <i class="bi bi-shop"></i>
        </div>
        <h3>0</h3>
        <p>Sellers</p>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">
          <i class="bi bi-shield-check"></i>
        </div>
        <h3>1</h3>
        <p>Admins</p>
      </div>
    </div>
  </div>

  <!-- User Management -->
  <div class="card fade-in">
    <h3><i class="bi bi-people"></i> User Management</h3>

    <div th:if="${users.empty}" class="alert alert-info">
      <i class="bi bi-info-circle"></i> No users found in the system.
    </div>

    <div th:unless="${users.empty}" class="table-responsive">
      <table class="table">
        <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
          <td th:text="${user.id}"></td>
          <td th:text="${user.firstName + ' ' + user.lastName}"></td>
          <td th:text="${user.email}"></td>
          <td>
            <span th:if="${user.role == 'BUYER'}" class="badge badge-primary">Buyer</span>
            <span th:if="${user.role == 'SELLER'}" class="badge badge-success">Seller</span>
            <span th:if="${user.role == 'ADMIN'}" class="badge badge-danger">Admin</span>
          </td>
          <td>
            <a th:href="@{/admin/edit/{id}(id=${user.id})}" class="btn btn-sm btn-outline-primary me-1">
              <i class="bi bi-pencil"></i> Edit
            </a>
            <a th:href="@{/admin/delete/{id}(id=${user.id})}" class="btn btn-sm btn-outline-danger"
               onclick="return confirm('Are you sure you want to delete this user?')">
              <i class="bi bi-trash"></i> Delete
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="card fade-in">
    <h3><i class="bi bi-lightning"></i> Admin Actions</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
      <a href="/" class="btn btn-primary">
        <i class="bi bi-house"></i> View Site
      </a>
      <a href="/admin/login" class="btn btn-secondary">
        <i class="bi bi-shield-lock"></i> Admin Login
      </a>
      <a href="/logout" class="btn btn-danger">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
  <div class="footer-content">
    <p>ðŸš€ <strong>AD-X Advertising Platform</strong> - Admin Panel</p>
    <p>Â© 2024 AD-X. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
    <p>Admin Dashboard | Version 1.0.0</p>
  </div>
</footer>
</body>
</html>