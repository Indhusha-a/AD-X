<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>AD-X - Admin Dashboard</title>
  <link href="/css/style.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      border-left: 4px solid #dc3545;
    }

    .stat-card.primary {
      border-left-color: #667eea;
    }

    .stat-card.success {
      border-left-color: #28a745;
    }

    .stat-card.warning {
      border-left-color: #ffc107;
    }

    .stat-card.info {
      border-left-color: #17a2b8;
    }

    .stat-icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .stat-card .stat-icon { color: #dc3545; }
    .stat-card.primary .stat-icon { color: #667eea; }
    .stat-card.success .stat-icon { color: #28a745; }
    .stat-card.warning .stat-icon { color: #ffc107; }
    .stat-card.info .stat-icon { color: #17a2b8; }

    .quick-actions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .admin-action-btn {
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 10px;
      padding: 20px 15px;
      text-align: center;
      text-decoration: none;
      color: #333;
      transition: all 0.3s ease;
    }

    .admin-action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      text-decoration: none;
      color: #333;
    }

    .admin-action-btn.primary:hover { border-color: #667eea; }
    .admin-action-btn.success:hover { border-color: #28a745; }
    .admin-action-btn.warning:hover { border-color: #ffc107; }
    .admin-action-btn.info:hover { border-color: #17a2b8; }
    .admin-action-btn.danger:hover { border-color: #dc3545; }

    .action-icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .admin-action-btn.primary .action-icon { color: #667eea; }
    .admin-action-btn.success .action-icon { color: #28a745; }
    .admin-action-btn.warning .action-icon { color: #ffc107; }
    .admin-action-btn.info .action-icon { color: #17a2b8; }
    .admin-action-btn.danger .action-icon { color: #dc3545; }
  </style>
</head>
<body>
<!-- Navigation Header -->
<nav class="navbar">
  <div class="container">
    <a class="navbar-brand" href="/">ðŸš€ AD-X</a>
    <div class="navbar-nav">
                <span class="navbar-text" style="margin-right: 20px;">
                    <i class="bi bi-shield-check"></i> Welcome, Administrator!
                </span>
      <a class="btn btn-secondary" href="/logout">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </div>
  </div>
</nav>

<div class="container">
  <!-- Flash Messages -->
  <div th:if="${success}" class="alert alert-success" role="alert">
    <i class="bi bi-check-circle"></i> <span th:text="${success}"></span>
  </div>
  
  <div th:if="${error}" class="alert alert-danger" role="alert">
    <i class="bi bi-exclamation-triangle"></i> <span th:text="${error}"></span>
  </div>

  <div class="dashboard-header">
    <h1><i class="bi bi-speedometer2"></i> Admin Dashboard</h1>
    <p>System Administration & User Management</p>
  </div>

  <!-- Statistics -->
  <div class="card fade-in">
    <h3><i class="bi bi-graph-up"></i> System Overview</h3>
    <div class="admin-stats">
      <div class="stat-card">
        <div class="stat-icon">
          <i class="bi bi-people"></i>
        </div>
        <h3 th:text="${users.size()}">0</h3>
        <p>Total Users</p>
      </div>

      <div class="stat-card primary">
        <div class="stat-icon">
          <i class="bi bi-cart"></i>
        </div>
        <h3 th:text="${users.?[role == 'BUYER'].size()}">0</h3>
        <p>Buyers</p>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">
          <i class="bi bi-shop"></i>
        </div>
        <h3 th:text="${users.?[role == 'SELLER'].size()}">0</h3>
        <p>Sellers</p>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">
          <i class="bi bi-shield-check"></i>
        </div>
        <h3 th:text="${users.?[role == 'ADMIN'].size()}">1</h3>
        <p>Admins</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="card fade-in">
    <h3><i class="bi bi-lightning"></i> Quick Actions</h3>
    <div class="quick-actions-grid">
      <a href="/admin/financial" class="admin-action-btn success">
        <div class="action-icon">
          <i class="bi bi-graph-up"></i>
        </div>
        <strong>Financial Dashboard</strong>
        <small>Revenue & Payments</small>
      </a>

      <a href="/admin/payments" class="admin-action-btn primary">
        <div class="action-icon">
          <i class="bi bi-credit-card"></i>
        </div>
        <strong>Payment Management</strong>
        <small>Manage payments</small>
      </a>

      <a href="/admin/payouts" class="admin-action-btn warning">
        <div class="action-icon">
          <i class="bi bi-cash-coin"></i>
        </div>
        <strong>Payout Management</strong>
        <small>Seller payouts</small>
      </a>

      <a href="/" class="admin-action-btn info">
        <div class="action-icon">
          <i class="bi bi-house"></i>
        </div>
        <strong>View Site</strong>
        <small>Public website</small>
      </a>

      <a href="/admin/login" class="admin-action-btn">
        <div class="action-icon">
          <i class="bi bi-shield-lock"></i>
        </div>
        <strong>Admin Login</strong>
        <small>Login page</small>
      </a>

      <a href="/logout" class="admin-action-btn danger">
        <div class="action-icon">
          <i class="bi bi-box-arrow-right"></i>
        </div>
        <strong>Logout</strong>
        <small>Sign out</small>
      </a>
    </div>
  </div>

  <!-- User Management -->
  <div class="card fade-in">
    <h3><i class="bi bi-people"></i> User Management</h3>

    <div th:if="${users.empty}" class="alert alert-info">
      <i class="bi bi-info-circle"></i> No users found in the system.
    </div>

    <div th:unless="${users.empty}" class="table-responsive">
      <table class="table">
        <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
          <td th:text="${user.id}"></td>
          <td th:text="${user.firstName + ' ' + user.lastName}"></td>
          <td th:text="${user.email}"></td>
          <td>
            <span th:if="${user.role == 'BUYER'}" class="badge badge-primary">Buyer</span>
            <span th:if="${user.role == 'SELLER'}" class="badge badge-success">Seller</span>
            <span th:if="${user.role == 'ADMIN'}" class="badge badge-danger">Admin</span>
          </td>
          <td>
            <a th:href="@{/admin/edit/{id}(id=${user.id})}" class="btn btn-sm btn-outline-primary me-1">
              <i class="bi bi-pencil"></i> Edit
            </a>
            <a th:href="@{/admin/delete/{id}(id=${user.id})}" class="btn btn-sm btn-outline-danger"
               onclick="return confirm('Are you sure you want to delete this user?')">
              <i class="bi bi-trash"></i> Delete
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- System Information -->
  <div class="card fade-in">
    <h3><i class="bi bi-info-circle"></i> System Information</h3>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
      <div>
        <strong>Platform Name:</strong> AD-X Advertising Platform
      </div>
      <div>
        <strong>Version:</strong> 1.0.0
      </div>
      <div>
        <strong>Commission Rate:</strong> 10%
      </div>
      <div>
        <strong>Payout Minimum:</strong> $10.00
      </div>
      <div>
        <strong>Default Currency:</strong> USD
      </div>
      <div>
        <strong>Support Email:</strong> support@adx.com
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
  <div class="footer-content">
    <p>ðŸš€ <strong>AD-X Advertising Platform</strong> - Admin Panel</p>
    <p>Â© 2024 AD-X. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
    <p>Admin Dashboard | Version 1.0.0</p>
  </div>
</footer>

<script>
  // Auto-hide alerts after 5 seconds
  document.addEventListener('DOMContentLoaded', function() {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
      setTimeout(() => {
        alert.style.display = 'none';
      }, 5000);
    });

    // Add animation to stat cards
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach((card, index) => {
      card.style.transform = 'translateY(20px)';
      card.style.opacity = '0';
      card.style.transition = 'all 0.5s ease';

      setTimeout(() => {
        card.style.transform = 'translateY(0)';
        card.style.opacity = '1';
      }, index * 100);
    });
  });
</script>
</body>
</html>